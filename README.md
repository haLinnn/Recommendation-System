# 💡 일일일: 연관 콘텐츠 추천시스템
- Member: deep daiv. 데이터 분석 디데이 팀
- Status: Complete
- Period: 23.02.27 ~ 23.04.08

## 1. 프로젝트 소개

이번 프로젝트의 목적은 일일일 기업의 연관  콘텐츠 시스템을 개선하는 것입니다.

**일일일**은 ‘일하는 모든 순간들을 더 효율적으로’ 라는 슬로건을 내세우는 기업으로 여러 사람들이 원하는 정보를 쉽고 빠르게 얻을 수 있게 하는 것을 목표로 하며, 다양한 주제의 콘텐츠들을 카테고리 별로 나눠 사용자의 목적에 맞게 보여주는 콘텐츠 큐레이션 플랫폼입니다.

[일일일(ONEONEONE) - 일하는 모든 순간들을 더 효율적으로](https://oneoneone.kr/)

## 2. 문제 정의
저희 팀은 일일일 플랫폼에 연관 콘텐츠 추천 시스템이 잘 구축되어 있지 않은 점을 문제로 삼았습니다. 현재 일일일은 마땅한 알고리즘 없이 수작업으로 콘텐츠 선별 작업을 진행하고 있고, 연관 콘텐츠를 제공하는 게시물은 소수 뿐입니다. 이는 시간 및 인력 낭비 뿐만 아니라 추천 콘텐츠의 질을 떨어뜨리는 문제를 가져옵니다.

<p align="center"><img src="https://user-images.githubusercontent.com/108817458/236519864-8838a1d2-908a-46ac-87f2-ccdc6151f759.png"/></p>

현재 일일일 사이트의 추천된 콘텐츠는 연관 콘텐츠라기보다는 최신 소식을 함께 보여주고 있는 것에 가깝습니다. 저희는 일련의 알고리즘으로 연관 콘텐츠 추천 시스템을 구축하여 인력 및 시간 낭비를 절감하고, 보다 정교한 결과물을 도출하기 위해 다음과 같이 연관 콘텐츠를 정의하였습니다.

> **연관 콘텐츠 정의**
> 
저희 팀이 이번 프로젝트에서 정의한 연관 콘텐츠는 **주요 키워드의 도메인과 관련된 분야와 해당 콘텐츠의 전반적인 내용을 종합한 연관 콘텐츠**입니다. 

예를 들어, 사용자가 ChatGPT에 관한 글을 읽으면 연관 콘텐츠로 단순히 ‘ChatGPT’라는 키워드가 포함된 다른 콘텐츠가 아닌 ‘인공지능’, ‘Bard’등과 같이 ‘ChatGPT’ 관련 분야의 다른 콘텐츠를 추천하고자 하는 것이 본 프로젝트의 목표입니다.

## 3. 프로젝트 진행 과정
> **3.1 데이터 소개**
> 

연관 콘텐츠 추천을 위해 일일일로부터 전해 받은 데이터는 이벤트 RD와 콘텐츠 RD입니다. 

이벤트 RD 데이터로는 개별 아이디마다 어떤 이벤트 (콘텐츠 열람/키워드 검색 등)가 발생했는지, 또 발생한 시각과 이에 따른 콘텐츠 전반에 대해 확인할 수 있고, 콘텐츠 RD 데이터는 제목을 비롯하여 콘텐츠 설명, 콘텐츠가 발생한 미디어, 크리에이터, 카테고리, URL 등 전반적으로 콘텐츠를 이해하기 용이한 데이터 컬럼들로 이루어져 있습니다.

‘description’ 컬럼과 같이 콘텐츠 내용이 존재하는 콘텐츠 RD를 기본적으로 사용해 프로젝트를 진행했고, 추후 프로젝트에 필요한 데이터를 이벤트 RD에서 추출하여 진행했습니다. 

> **3.2 데이터 전처리(추가 데이터 수집)**
> 

콘텐츠 내용이 중략된 ‘description’ 컬럼에 존재하는 콘텐츠 내용 만으로는 연관 콘텐츠를 추천하기에 정확성이 부족하다고 판단했고, 콘텐츠 RD에 존재하는 ‘original_url’ 컬럼을 이용해 각각의 콘텐츠 전문을 크롤링하여 ‘content’ 컬럼에 새로 추가해주었습니다.

<p align="center"><img src="https://user-images.githubusercontent.com/108817458/236520729-4c797bda-5418-41fc-ab15-1fb9c03aa121.png"/></p>

> **3.3 키워드 추출**
> 

각 콘텐츠 내용을 대표할 수 있는 키워드를 추출하기 위해 진행한 분석 과정은 다음과 같습니다. 

1. 콘텐츠 내용에서 **특수문자 제거** 후 **한글과 영어 분리**
2. 분리한 한글/영어 각각의 콘텐츠 전문을 바탕으로 콘텐츠 별로 가장 연관성이 높은 **명사** **키워드 한글 3개, 영어 3개씩** 추출
    
    명사와 키워드를 추출하는 데 사용된 패키지는 아래와 같습니다. 
    
    `명사 추출`
    
    - 한글 콘텐츠: kiwi 형태소 분석기 사용
    - 영어 콘텐츠: spaCy 사용
    
    `키워드 추출`
    
    - 한글 콘텐츠: KoBERT 사용
    - 영어 콘텐츠: KeyBERT 사용
    
    키워드 추출 시 한글은 샘플로 1000개 데이터를 추출하여 데이터를 살펴보며 불용어 리스트를 직접 정의했고, 영어는 패키지 내에 정의된 ‘english’ 불용어에 추가로 직접 정의한 불용어 리스트를 이용했습니다.
    
    이때 불용어의 기준은 **키워드라고 하기에 너무 보편적인 명사**(ex : 결론, 방송, 서비스 등)나 **빈번하게 등장하는 명사**(ex : 프로그래밍, 개발 등)를 기준으로 두었습니다.

    추출한 키워드 예시는 다음과 같습니다.
<p align="center"><img src="https://user-images.githubusercontent.com/108817458/236520974-7650d877-6085-4d88-91ef-789b050067e6.png"/></p>

> **3.4 유사도 분석 후 콘텐츠 추천**
> 

위의 과정에서 추출한 키워드를 바탕으로 회원 미가입자 대상, 회원 가입자 대상, 회원 가입자가 구독한 크리에이터의 유사한 타 콘텐츠 추천 이렇게 세 가지 방향으로 분석을 진행하였습니다.

1.  **회원 미가입자**
    
    `가입자의 취향`과 `중요 키워드`, `콘텐츠 제목 및 내용 유사도`를 모두 반영한 연관 콘텐츠 추천
    
    → 아래의 세 가지 가중치를 고려해  약 3 : 4 : 3의 비율로 가중치 부여
    
    1) **`이벤트 가중치`**
    
    : 이벤트 RD의 북마크(bookmark), 좋아요(like), 링크 공유(link), 검색(keyword) 등의 데이터를 바탕으로 회원 가입자들의 **취향을 반영하여** 추천
    
    - ‘view’, ‘bookmark’, ‘link’, ‘like’, ‘keyword’ 변수에 가중치를 두어 스코어 계산
       
    - 노출된 기간이 길수록 조회수 및 좋아요 수가 많아지므로 위에서 구한 가중치 합을 게시물 생성 날짜로부터 현재(3월 2일로 지정)까지의 기간으로 나눔
    
    2) **`키워드 가중치`**
    
    : 추출한 키워드를 바탕으로 콘텐츠 내 각 **키워드의 빈도수**를 고려하여 빈도수 기반 스코어 계산
    
    
    3) **`제목/내용 유사도 가중치`**
    
      : **콘텐츠의 제목과 내용의 유사도**를 TF-IDF 및 코사인 유사도를 활용해 계산

<p align="center"><img src="https://user-images.githubusercontent.com/108817458/236523815-a04c0219-5677-4105-ae3a-636c7f997bc5.png"/></p>
        
2. **회원 가입자**
    
    회원 미가입자를 대상으로 한 추천 방식과 유사하나 타인의 취향을 반영하기 않기 위해 이벤트 가중치는 제외하고 키워드 빈도수와 콘텐츠 제목 간 유사도를 중점적으로 고려해 콘텐츠 추천
    
    1) **`키워드 가중치`**
    
    : 추출한 키워드를 바탕으로 콘텐츠 내 각 **키워드의 빈도수를 고려**하여 빈도수 기반 스코어 계산
    
    
    2) **`제목/내용 유사도 가중치`**
    
    : **콘텐츠의 제목과 내용의 유사도**를 TF-IDF 및 코사인 유사도를 활용해 계산
    
<p align="center"><img src="https://user-images.githubusercontent.com/108817458/236523927-778b65f9-b688-4399-890e-f71a38960dae.png"/></p>
    

 3. **구독한 크리에이터의 타 콘텐츠 추천**

    이번 일일일 연관 콘텐츠 추천 프로젝트의 궁극적인 목적은 결국 조금 더 정교한 연관 콘텐츠 추천을 통해 사용자들을 사로잡아 일일일 플랫폼의 이용자 수를 늘리는 데 있습니다. 

    따라서 위의 1, 2번과의 과정과 더불어 일일일 내의 이용률을 높이기 위한 추가적인 방안으로  사용자가 구독한 크리에이터의 다른 콘텐츠를 추천해주는 방법을 고안했습니다.

    이는 사용자가 구독한 크리에이터의 타 콘텐츠를 추천해주기 위해 회원 가입자를 대상으로 한 콘텐츠 추천의 경우와 동일한 방식을 적용했습니다.

<p align="center"><img src="https://user-images.githubusercontent.com/108817458/236522070-be8ef66c-e808-46ad-8edd-c943f03daaf7.png"/></p>

   사진과 같이 사용자 A가 크리에이터 ‘토스 피드’를 구독하면서 ‘토스 피드’의 다른 콘텐츠를 본 이력이 있을 경우 ‘토스 피드’의 콘텐츠 중 시청한 콘텐츠와 유사한 다른 콘텐츠를 추천해주는 방식입니다. 기존 콘텐츠와 추천된 연관 콘텐츠 모두 토스 피드의 게시물인 것을 확인할 수 있습니다.

## 4. 결론 및 솔루션
현재 <일일일>은 수작업 선별 방식으로 인해 연관 콘텐츠 시스템 구축이 미흡합니다. 그러다 보니 사용자는 하나의 콘텐츠를 본 이후에 유사한 콘텐츠를 접하기가 쉽지 않고, 이는 큐레이션 플랫폼으로써의 <일일일>서비스의 효용성에 대한 의문으로 이어집니다.따라서 저희 팀은 주요 키워드의 도메인과 관련된 분야 혹은 해당 키워드가 포함된 콘텐츠의 전반적인 내용을 종합한 콘텐츠로 정의한 연관 콘텐츠를 추천하는 시스템을 제안했습니다.

만든 시스템을 토대로 연관 콘텐츠를 아래의 사진과 같이 일일일 페이지에 적용한다면 높은 가시성과 좀 더 정교한 연관 콘텐츠로 인해 이용자의 증가를 꾀할 수 있을 것이라 기대합니다.

<p align="center"><img src="https://user-images.githubusercontent.com/108817458/236519583-9161f97e-5d33-4edf-81fa-6a79e813bf54.png"/></p>

## 5. 한계점
다음은 본 프로젝트는 진행하며 발생한 한계점과 그에 대한 해결 방안입니다.  

1. **키워드 추출 시 한글과 영어 키워드를 한번에 추출하지 못하였습니다.**
- `문제`: 키워드 추출 시 한글과 영어를 분리한 후 각 언어별로 키워드 추출을 진행했는데 이는 전체 맥락에서의 키워드 중요도와 각 언어 내에서의 키워드 중요도가 바뀔 가능성이 있다는 문제가 있습니다.
- `해결 방안`: 일일일에서는 machine translation과 같은 기법을 적용하여 영어 - 한글로 번역한 뒤에 언어 구분 없이 중요 키워드를 한 번에 뽑는다면 더욱 정교한 결과를 얻을 수 있을 것이라 기대합니다.
2. **제공 받은 모든 데이터에 대한 분석을 진행하지 못하였습니다.**
- `문제`: 시간적 제약과 컴퓨터 성능의 제약 등으로 인해 제공 받은 모든 데이터에 대해 연관 콘텐츠 추천을 하는 것에 어려움이 있어 카테고리 비율이 높은 IT/개발 분야의 데이터를 대상으로 프로젝트를 진행하여 결과를 도출하였습니다.
- `해결 방안`: 일일일의 경우 자체 서버를 활용하여 전체 데이터에 대한 시스템 구축이 가능하리라 예상합니다.
